# Домашнее задание к занятию 1. «Типы и структура СУБД»

## Задача 1

     Архитектор ПО решил проконсультироваться у вас, какой тип БД 
     лучше выбрать для хранения определённых данных.
     
     Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:
     
     - электронные чеки в json-виде,
     - склады и автомобильные дороги для логистической компании,
     - генеалогические деревья,
     - кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
     - отношения клиент-покупка для интернет-магазина.
     
     Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

### Ответ

- электронные чеки в json-виде: NoSQL, MongoDB документоориентированная БД. Выбираем такой вариант из-за объекта, который нам нужно хранить;

- склады и автомобильные дороги для логистической компании: NoSQL, Neo4j Графовая БД, сможем положить описанные данные в виде графа, где дороги это сами графы, а склады узлы;

- генеалогические деревья: NoSQL, Neo4j Графовая БД, так же представляем в виде узла человека, а графы это тип родственной связи;

- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации: NoSQL, Memcached, будем хранить данные в виде ключч:значние;

- отношения клиент-покупка для интернет-магазина: SQL, реляционная БД, потмоу что нужно реализовать отношение.

## Задача 2

     Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно 
     CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
     (каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):
     
     - данные записываются на все узлы с задержкой до часа (асинхронная запись);
     - при сетевых сбоях система может разделиться на 2 раздельных кластера;
     - система может не прислать корректный ответ или сбросить соединение.
     
     Согласно PACELC-теореме как бы вы классифицировали эти реализации?

### Ответ

- данные записываются на все узлы с задержкой до часа (асинхронная запись): AP (Availability + Partition Tolerance)

- при сетевых сбоях система может разделиться на 2 раздельных кластера: CA (Consistency + Availability)

- система может не прислать корректный ответ или сбросить соединение: CP (Consistency + Partition Tolerance)

## Задача 3

      Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

### Ответ

Нет, не могут. BASE - это противопоставление ACID. Например, ACID гарантирует консистентность данных после транзакции, BASE же допускает возврат неверных данных.

## Задача 4

      Вам дали задачу написать системное решение, основой которого бы послужили:
      
      - фиксация некоторых значений с временем жизни,
      - реакция на истечение таймаута.
      
      Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. 
      Что это за система? Какие минусы выбора этой системы?

### Ответ

Скорей всего это Redis.Хранение данных происходит в памяти и периодически делаются снимки на жесткий диск. Может получится так, что при отказе какие-то данные могут не успеть оказаться в снимке, они не восстановятся при восстановлении самой БД, так мы можем потерять события и соответсвующие уведомления в pub/sub. Так же он однопоточный, может масштабироваться только горизонтально посредством кластеризации.