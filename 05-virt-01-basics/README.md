# Домашнее задание к занятию "1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

## 1. Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

Полная (аппаратная) виртуализация - полностью эмулирует окружение физического компьютера, с соответствующими физическими устройствами, обеспечивая тотальную изоляцию гостевой ОС

Паравиртуализации - ядро гостевой ОС подготавливается (модифицируется) для работы с API Гипервизора, чтобы получить доступ к аппаратным средствам.

Виртуализация на уровне ОС - гостевая ОС не имеет собственного ядра, является по факту изолированным экземплярос пространства пользователя.

## 2. Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:

- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:

- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

### Ответ:

### - Высоконагруженная база данных, чувствительная к отказу.

#### Физические сервера

1. Постоянно нагруженной БД потребуются все ресурсы хоста, если размещать на виртуализации, возможна попадание в ситуацию конкуренции за ресурсы с соседями, а просто выделять целый гипервизор только под БД не экономно и не имеет смысла).

1. Так же для БД важен хороший I\O, при размещении на физическом сервере все будет зависте от аппаратной составляющей, виртуализация дает деградацию.

### - Различные web-приложения.

#### Виртуализация уровня ОС

1. Позволяет создать необходимое окружения для каждого web-приложения и решить проблему с зависимостями по используемым бибилотекам, при поднятии версии не будет риска поломки соседнего web-приложения, которое так же использует обновляемую либу

1. Скорость разворачивания приложений, не требуется установка ОС под каждое приложение

### - Windows системы для использования бухгалтерским отделом.

#### Паравиртуализация

1. Позволяет упростить администрирование поддержку/пользователей - для получение данных по проблемам с ВАРМ нужно только подключиться к Визору и посмотреть метрики, возможность бэкапа рабочих ВАРМ пользователей

1. Экономия по парку техники, не требуется покупка мощных ПК, достаточно тонких клиентов

### - Системы, выполняющие высокопроизводительные расчеты на GPU.

#### Физические сервера

1. Виртуализация снижает эффективность использования вычислительных ресурсов

## 3. Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

### Ответ:

1. Hyper-V, учитывая преимущественность Windows based инфраструктуры. Так же имеет возможность балансировки, репликации, бэкапы

1. KVM или Proxmox, оба open source, поддерживают Windows

1. Hyper-V Server, бесплатноый продукт от Microsoft

1. LXD или Docker, обеспечивают виртуализации на уровне ОС, необходимую для тестирования программного продукта в разных окружениях. Наиболее популярен Docker, LXD менее популярен

## 4. Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

### Проблемы

1. Содержание команды администраторов под каждую систему управления виртуализации, повышенные расходы
1. Оплата нескольких договоров поддержки, в случае использования платных систем виртуализации, повышенные расходы
1. Невозможность переноса ВМ между системами вирутализации, банальная ситуация на одном кластере закончились ресурсы, есть потребность в разворачивании ВМ на этой системе виртуализации, т.к. она наиболее подходящая для решения поставленной задачи. Но разгрузить ее переносом ВМ на другой кластер другой системы виртуализации невозможно

### Возможное решение

1. Формирование группы экспертов, которые будут подгатавливать каталог типовых инструкций для проведения работ, решение нештатных ситуаций, за счет чего возможен найм сотрудников обладающими поверхностными знаниями (базовые знания и опыт работы с виртуализацией, знание конкретной системы необязательно)
1. За счет п.1, взращивание и удержание экспертов, отправка их на курсы от вендоров по углубленному изучению вендорского ПО. Дает возможность регулирование от какого вендора требуется наличие поддержки, а где возможно отказаться.
1. Ведение инфрастуктуры как кода, т.е. нужно иметь плейбуки для поднятия ВМ с 0 по различным сценариям, т.е. нам не потребуется копирование ВМ с системы виртуализации, если мы можем поднять аналогичную на другой системе с 0, данные перенести возможно и по сети

### Создавал бы я гетерогенную среду ?

Да, при наличии возможных проблем и рисков гетерогенной среды есть так же и плюсы эксплуатации - мы снижаем зависимость в части ограничения системы, которую мы используем. В случае проблемы с одним вендором мы полностью не теряем свою инфрастуктуру, мы теряем часть, которую при необходимости можно развернуть на другой системе виртуализации, с какими-то ограничением, но в моменте важно снять влияние пусть и с какой-то деградацией.